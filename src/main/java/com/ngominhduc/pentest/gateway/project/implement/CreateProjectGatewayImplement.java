package com.ngominhduc.pentest.gateway.project.implement;

import com.ngominhduc.pentest.common.annotation.Gateway;
import com.ngominhduc.pentest.gateway.project.CreateProjectGateway;
import com.ngominhduc.pentest.model.project.ProjectModel;
import com.ngominhduc.pentest.repository.ProjectModelRepository;
import org.springframework.beans.factory.annotation.Autowired;

@Gateway
public class CreateProjectGatewayImplement implements CreateProjectGateway {
    private final ProjectModelRepository repository;

    @Autowired
    public CreateProjectGatewayImplement(ProjectModelRepository projectModelRepository) {
        this.repository = projectModelRepository;
    }

    @Override
    public ProjectModel createProject(ProjectModel project) {
        if (repository.findProjectModelByProjectName(project.getProjectName()) == null) {
            ProjectModel projectModel = ProjectModel.builder().projectName(project.getProjectName()).build();
            return repository.save(projectModel);
        }
        throw new RuntimeException();
    }
}
